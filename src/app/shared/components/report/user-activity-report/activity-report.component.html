<div class="pcoded-content">
    <div class="pcoded-inner-content">
        <div class="main-body">
            <div class="page-wrapper">
                <div class="page-body">
                    <div class="clearfix mb-3">
                        <div class="float-left pt-3">
                            <a class="h4 pr-2">Reports</a>
                            <a class=" pl-2">Home / <span *ngIf="!User">User Activity Admin</span><span  *ngIf="User">User Activity Customer</span></a>
                        </div>
                        <div class="float-right">
                            <a>
                                <button class="btn btn-secondary btn-sm font-weight-bold" (click)= "saveAsCSV()" type="submit">Export</button>
                            </a>
                            <a  type="submit" (click)="clearSearch()" id="refresh">
                                <img class="" src="../../../../assets/images/icon/icons/Delete-icon.png">
                            </a>
                        </div>
                    </div>

                    <div class="container-fluid bg_filter border border-dark rounded mb-5">
                        <div class="row p-1 py-4">
                            <div *ngIf="!User" class="col-sm-4 col-lg-4 pl-sm-2 pl-lg-2">
                                <div class="form-group">
                                    <label class="h7">Date Start</label>
                                    <input type="text" class="input-control shadow" placeholder="Date Start" name="date" #date (keyup)="filterTable('created_at',  $event)"
                                    (blur)="filterTable('created_at', $event)">
                                </div>
                            </div>
                            <div *ngIf="User" class="col-sm-4 col-lg-4 pl-sm-2 pl-lg-2">
                                <div class="form-group">
                                    <label class="h7">Date Start</label>
                                    <input type="text" class="input-control shadow" placeholder="Date Start" name="date" #date (keyup)="filterTable2('created_at',  $event)"
                                    (blur)="filterTable2('created_at',$event)">
                                </div>
                            </div>
                            <div *ngIf="!User" class="col-sm-4 col-lg-4 pl-sm-2 pl-lg-2">
                                <div class="form-group">
                                    <label class="h7">Date End</label>
                                    <input type="text" class="input-control shadow" placeholder="Date End" name="date-end" #dateE (keyup)="filterTable('updated_at', $event)"
                                    (blur)="filterTable('updated_at', $event)">
                                </div>
                            </div>
                            <div *ngIf="User" class="col-sm-4 col-lg-4 pl-sm-2 pl-lg-2">
                                <div class="form-group">
                                    <label class="h7">Date End</label>
                                    <input type="text" class="input-control shadow" placeholder="Date End" name="date-end" #dateE (keyup)="filterTable2('updated_at', $event)"
                                    (blur)="filterTable2('updated_at', $event)">
                                </div>
                            </div>
                            <div class="col-sm-4 col-lg-4 pt-lg-0 pt-sm-0 pt-2 pr-sm-2 pr-lg-2">
                                <div class="form-group">
                                    <label class="h7">User</label>
                                    <input type="text" class="input-control shadow" *ngIf="User" placeholder="Customer" readonly>
                                    <input type="text" class="input-control shadow" *ngIf="!User" placeholder="Admin" readonly>
                                    <i class="feather icon-chevron-down icon" (click)="Toggle()" style="padding: 0rem 0.7rem;"></i>
                                </div>
                            </div>
                            <div class="col-sm-4 col-lg-4 pl-sm-2 pl-lg-2">
                                <div class="form-group">
                                    <label hidden class="h7">Date Start</label>
                                    <input hidden type="text" class="input-control shadow" placeholder="Date Start" name="id" #search (keyup)="filterTable('id', $event)"
                                    (blur)="filterTable('id', $event)">
                                </div>
                            </div>
                            <div *ngIf="!User" class="col-sm-4 col-lg-4 pl-sm-2 pl-lg-2">
                                <div class="form-group">
                                    <label class="h7">IP</label>
                                    <input type="text" class="input-control shadow" placeholder="IP" name="ip" #ip (keyup)="filterTable('ip_address', $event)"
                                    (blur)="filterTable('ip_address', $event)">
                                </div>
                            </div>
                            <div *ngIf="User" class="col-sm-4 col-lg-4 pl-sm-2 pl-lg-2">
                                <div class="form-group">
                                    <label class="h7">IP</label>
                                    <input type="text" class="input-control shadow" placeholder="IP" name="ip" #ip (keyup)="filterTable2('ip_address', $event)"
                                    (blur)="filterTable2('ip_address', $event)">
                                </div>
                            </div>
                            <div class="col-sm-4 col-lg-4 pt-lg-0 pt-sm-0 pt-2 pr-sm-2 pr-lg-2">
                                <div  *ngIf="!User" class="form-group">
                                    <label class="h7">Admin</label>
                                    <input type="text" class="input-control shadow" placeholder="All" name="id" #search (keyup)="filterTable('first_name', $event)"
                                    (blur)="filterTable('first_name', $event)">
                                </div>
                                <div  *ngIf="User" class="form-group">
                                    <label class="h7">Customer Name</label>
                                    <input type="text" class="input-control shadow" placeholder="Customer's Name" name="id" #search (keyup)="filterTable2('first_name', $event)"
                                    (blur)="filterTable2('first_name', $event)">
                                </div>
                            </div>
                        </div>

                    </div>

                    <div class="row">
                        <div class="col-md-12">
                            <div class="card px-3">
                                <div class="category-header pt-3 p-2">
                                    <p class="col-7">Comment</p>
                                    <p class="col-3">IP</p>
                                    <p class="col-2">Date</p>
                                </div>
                                <div class="card-block" id="categoryTable" style="margin-top: 0px;padding-top: 6px; padding-left: 0px; padding-right: 0px;">
                                    <div *ngIf="isLoading" >
                                        <br><br>
                                        <div  class="lds-default">
                                            <div></div>
                                            <div></div>
                                            <div></div>
                                            <div></div>
                                            <div></div>
                                            <div></div>
                                            <div></div>
                                            <div></div>
                                            <div></div>
                                            <div></div>
                                            <div></div>
                                            <div></div>
                                        </div>
                                    </div>
                                    <div *ngIf="!isLoading">
                                        <div *ngIf="!User && filteredAdminActivity?.length > 0">
                                            <div class="category-body" *ngFor="let report of filteredAdminActivity | paginate: { itemsPerPage: 5, currentPage:p, id: 'second'};let i = index;">
                                                <div class="row1 p-2">
                                                    <p class="col-7 col-md-7 col-sm-7">{{report.activity}}</p>
                                                    <p class="col-3 col-md-3 col-sm-3">{{report.ip_address}}</p>
                                                    <p class="col-2 col-md-2 col-sm-2">{{report.created_at}}</p>
                                                </div>
                                           </div>
                                           <div  class="col-12">
                                            <pagination-controls class="my_pagination" (pageChange)="p = $event" id='second'></pagination-controls>
                                         </div>
                                        </div>
                                        <div *ngIf="User && filteredUserActivity?.length > 0">
                                            <div class="category-body" *ngFor="let report of filteredUserActivity | paginate: { itemsPerPage: 5, currentPage:p, id: 'second'};let i = index;">
                                                <div class="row1 p-2">
                                                    <p class="col-7 col-md-7 col-sm-7">{{report.activity}}</p>
                                                    <p class="col-3 col-md-3 col-sm-3">{{report.ip_address}}</p>
                                                    <p class="col-2 col-md-2 col-sm-2">{{report.created_a}}</p>
                                                </div>
                                           </div>
                                           <div  class="col-12">
                                            <pagination-controls class="my_pagination" (pageChange)="p = $event" id='second'></pagination-controls>
                                         </div>
                                        </div>
                                   </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>

